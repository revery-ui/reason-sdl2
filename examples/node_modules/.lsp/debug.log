Hello - from /Applications/Onivim2.app/Contents/Resources/../MacOS/rls
Previous log location: /var/folders/6g/bw9ys08145dgtk_cbzf8pwgw0000gn/T/lsp.log
Sending notification {"jsonrpc": "2.0", "method": "client/registerCapability", "params": {"registrations": [{"id": "watching", "method": "workspace/didChangeWatchedFiles", "registerOptions": {"watchers": [{"globPattern": "**/bsconfig.json"}, {"globPattern": "**/.merlin"}]}}]}}
Sending response {"id": 0, "jsonrpc": "2.0", "result": {"capabilities": {"textDocumentSync": 1, "hoverProvider": true, "completionProvider": {"resolveProvider": true, "triggerCharacters": ["."]}, "signatureHelpProvider": {"triggerCharacters": ["("]}, "definitionProvider": true, "typeDefinitionProvider": true, "referencesProvider": true, "documentSymbolProvider": true, "codeActionProvider": true, "executeCommandProvider": {"commands": ["reason-language-server.add_to_interface_inner"]}, "codeLensProvider": {"resolveProvider": true}, "documentHighlightProvider": true, "documentRangeFormattingProvider": true, "documentFormattingProvider": true, "documentFormattingProvider": true, "renameProvider": true}}}
Read message 
{"jsonrpc":"2.0","method":"initialized","params":{}}
Read message 
{"jsonrpc":"2.0","method":"workspace/didChangeConfiguration","params":{"settings":{"reason_language_server":{"location":"/Applications/Onivim2.app/Contents/Resources/../MacOS/rls","build_system_override_by_root":null,"refmt":null,"lispRefmt":null,"format_width":80,"per_value_codelens":false,"dependencies_codelens":true,"opens_codelens":true,"show_module_path_on_hover":true,"reloadOnChange":false,"show_debug_errors":false,"autoRebuild":true,"useOldDuneProcess":true}}}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re","languageId":"reason","version":1,"text":"let isNative =\n  switch (Sys.backend_type) {\n  | Native => true\n  | Bytecode => true\n  | _ => false\n  };\n\nlet getExecutingDirectory = () =>\n  isNative ? Filename.dirname(Sys.argv[0]) ++ Filename.dir_sep : \"\";\n\nlet run = () => {\n  Sdl2.Log.setOutputFunction((_category, _priority, message) => {\n    Console.log(\"SDL2: \" ++ message)\n  });\n\n  let _ = Sdl2.init();\n  let attachResult = Sdl2.Platform.win32AttachConsole();\n\n  // If we were unable to attach a console, try allocating a new one\n  let _code =\n    if (attachResult == 0) {\n      Sdl2.Platform.win32AllocConsole();\n    } else {\n      attachResult;\n    };\n\n  Console.log(\"Operating system: \" ++ Sdl2.Platform.getName());\n  Console.log(\"Operating system version: \" ++ Sdl2.Platform.getVersion());\n  let primaryWindow = Sdl2.Window.create(100, 100, \"test\");\n  let context = Sdl2.Gl.setup(primaryWindow);\n  let version = Sdl2.Gl.getString(Sdl2.Gl.Version);\n  let vendor = Sdl2.Gl.getString(Sdl2.Gl.Vendor);\n  let shadingLanguageVersion =\n    Sdl2.Gl.getString(Sdl2.Gl.ShadingLanguageVersion);\n\n  Console.log(\n    Printf.sprintf(\n      \"OpenGL Info - version: %s vendor: %s shading language version: %s\\n\",\n      version,\n      vendor,\n      shadingLanguageVersion,\n    ),\n  );\n\n  Sdl2.Gl.setSwapInterval(1);\n  //glfwMakeContextCurrent(primaryWindow);\n\n  /*let monitor = glfwGetPrimaryMonitor();\n    let vidMode = glfwGetVideoMode(monitor);*/\n\n  /*Sdl2.(\n      primaryWindow,\n      (vidMode.width - 800) / 2,\n      (vidMode.height - 600) / 2,\n    );*/\n  Sdl2.Window.setTitle(primaryWindow, \"reason-sdl2 example\");\n  Sdl2.Window.setWin32ProcessDPIAware(primaryWindow);\n\n  let scale = Sdl2.Window.getWin32ScaleFactor(primaryWindow);\n  Console.log(\"Win32 scale factor: \" ++ string_of_float(scale));\n\n  let display = Sdl2.Window.getDisplay(primaryWindow);\n  let dpi = Sdl2.Display.getDPI(display);\n  Console.log(\"Display DPI: \" ++ Sdl2.Display.Dpi.show(dpi));\n\n  let mode = Sdl2.Display.getDesktopMode(display);\n  Console.log(\"Display mode: \" ++ Sdl2.Display.Mode.show(mode));\n\n  Sdl2.Window.setSize(primaryWindow, 800, 600);\n  Sdl2.Window.center(primaryWindow);\n\n  //Sdl2.Window.setTransparency(primaryWindow, 0.8);\n\n  Sdl2.Window.setMacBackgroundColor(primaryWindow, 0.0, 0.0, 0.0, 1.);\n  Sdl2.Window.setMacTitlebarTransparent(primaryWindow);\n\n  Sdl2.Window.show(primaryWindow);\n\n  /*Sdl2.Window.setHitTest(\n      primaryWindow,\n      Some(\n        (w, x, y) => {\n          let size = Sdl2.Window.getSize(w);\n          let id = Sdl2.Window.getId(w);\n          Printf.printf(\n            \"hit test - window id: %d width: %d height: %d areaX: %d areaY: %d\\n\",\n            id,\n            size.width,\n            size.height,\n            x,\n            y,\n          );\n          if (x < 10) {\n            ResizeLeft;\n          } else if (y < 40) {\n            Draggable;\n          } else {\n            Normal;\n          };\n        },\n      ),\n    );*/\n  //Sdl2.Window.setBordered(primaryWindow, false);\n  // Sdl2.Window.setSize(primaryWindow, 800, 600);\n  Sdl2.Window.setResizable(primaryWindow, true);\n  Sdl2.Window.setMinimumSize(primaryWindow, 200, 100);\n\n  // Start text input, to experiment with IME + events\n  Sdl2.TextInput.setInputRect(25, 50, 100, 25);\n  Sdl2.TextInput.start();\n\n  //Sdl2.Window.maximize(primaryWindow);\n\n  /*   let secondaryWindow = */\n  /*     glfwCreateWindow(100, 50, ~sharedContext=primaryWindow, \"secondWindow\"); */\n  /*   glfwSetWindowPos(secondaryWindow, vidMode.width / 2, vidMode.height / 2); */\n  /*   glfwSetWindowSize(secondaryWindow, 800, 600); */\n  /*   glfwSetWindowTitle(secondaryWindow, \"second window\"); */\n\n  let cursors = [|\n    Sdl2.Cursor.createSystem(Arrow),\n    Sdl2.Cursor.createSystem(IBeam),\n    Sdl2.Cursor.createSystem(Wait),\n    Sdl2.Cursor.createSystem(No),\n    Sdl2.Cursor.createSystem(Hand),\n  |];\n  Random.self_init();\n  let cursor = Random.int(Array.length(cursors));\n  Sdl2.Cursor.set(cursors[cursor]);\n\n  let iconSurface =\n    Sdl2.Surface.createFromImagePath(\n      getExecutingDirectory() ++ \"favicon01.png\",\n    );\n  switch (iconSurface) {\n  | Ok(v) => Sdl2.Window.setIcon(primaryWindow, v)\n  | Error(msg) => prerr_endline(\"Error: \" ++ msg)\n  };\n\n  /* glfwSwapInterval sets the 'swap interval' - also known as vsync / vertical synchronization */\n  /* A setting of 0 disables vsync, unless it is overridden by a driver or a user setting */\n  // TODO:\n  //glfwSwapInterval(0);\n\n  //let width = ref(800);\n  //let height = ref(600);\n\n  let frameBufferSize = Sdl2.Gl.getDrawableSize(primaryWindow);\n  Console.log(\n    \"framebuffersize: \"\n    ++ string_of_int(frameBufferSize.width)\n    ++ \"x\"\n    ++ string_of_int(frameBufferSize.height),\n  );\n\n  let render = window => {\n    //  glfwMakeContextCurrent(window);\n    Sdl2.Gl.makeCurrent(window, context);\n    Sdl2.Gl.swapWindow(window);\n  };\n\n  //let frame = ref(0);\n  Sdl2.renderLoop(() => {\n    switch (Sdl2.Event.poll()) {\n    | None => ()\n    | Some(evt) =>\n      //Console.log(Sdl2.Event.show(evt));\n      switch (evt) {\n      | Sdl2.Event.Quit => exit(0)\n      | _ => ()\n      }\n    };\n\n    render(primaryWindow);\n    /* render(secondaryWindow); */\n    /*  if (frame^ == 60) {\n          captureWindow(primaryWindow, Printf.sprintf(\"scrot%d.tga\", frame^));\n        };\n        frame := frame^ + 1;*/\n\n    //let s = Glfw.glfwGetClipboardString(primaryWindow);\n\n    //let v = switch(s) {\n    //| Some(v) => \"Some(\" ++ v ++ \")\"\n    //| None => \"None\"\n    //}\n    //Console.log (\"Clipboard string before: \" ++ v);\n\n    //Glfw.glfwSetClipboardString(primaryWindow, \"test clipboard: \" ++ string_of_int(frame^));\n\n    //let s = Glfw.glfwGetClipboardString(primaryWindow);\n    //let v = switch(s) {\n    //| Some(v) => \"Some(\" ++ v ++ \")\"\n    //| None => \"None\"\n    //}\n    //Console.log (\"Clipboard string after: \" ++ v);\n\n    /* Run the GC so we can catch any GC-related crashes early! */\n    Gc.full_major();\n    //glfwPollEvents();\n    //glfwWindowShouldClose(primaryWindow);\n    false;\n  });\n\n  Console.log(\"Done!\");\n  //glfwTerminate();\n  Lwt.return();\n};\n"}}}
Found a `dune` file at /Users/bryphe/reason-sdl2/examples
]] Making a new jbuilder package at /Users/bryphe/reason-sdl2/examples
=== Project root: /Users/bryphe/reason-sdl2
Detected `esy` dependency manager for local use
Get ocaml stdlib dirs
Old dune process
=== Build dir:    /Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088
Include subdirs? no :/
Got a compiled base /Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/default/examples/.sdl2example.objs/byte
Local file: /Users/bryphe/reason-sdl2/examples/Cube.re
Local .cmt file: /Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/default/examples/.sdl2example.objs/byte/sdl2example__Cube.cmt
Local file: /Users/bryphe/reason-sdl2/examples/basic.re
Local .cmt file: /Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/default/examples/.sdl2example.objs/byte/sdl2example__Basic.cmt
Found sdl2 defined in /Users/bryphe/reason-sdl2/examples/../src/dune
Compiled base: /Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/default/examples/../src/.sdl2.objs/byte
>> Collecting deps for /Users/bryphe/.esy/3__________________________________________________________________/i/reason_native__s__console-0.1.0-bd137336/lib/console/lib
>> Collecting deps for /Users/bryphe/.esy/3__________________________________________________________________/i/reason_gl_matrix-0.9.9306-8d367e00/lib/reglm
>> Collecting deps for /Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__seq-opam__c__base-c4bafc44/lib/seq
>> Collecting deps for /Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__result-opam__c__1.4-bd05c165/lib/result
>> Collecting deps for /Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__ocamlfind-opam__c__1.8.1-cbae71df/lib/bytes
>> Collecting deps for /Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__lwt-opam__c__4.2.1-5422e25d/lib/lwt
>> Collecting deps for /Users/bryphe/.esy/3__________________________________________________________________/i/ocaml-4.8.1000-426898cd/lib/ocaml
Depedency dirs /Users/bryphe/.esy/3__________________________________________________________________/i/reason_native__s__console-0.1.0-bd137336/lib/console/lib /Users/bryphe/.esy/3__________________________________________________________________/i/reason_gl_matrix-0.9.9306-8d367e00/lib/reglm /Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__seq-opam__c__base-c4bafc44/lib/seq /Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__result-opam__c__1.4-bd05c165/lib/result /Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__ocamlfind-opam__c__1.8.1-cbae71df/lib/bytes /Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__lwt-opam__c__4.2.1-5422e25d/lib/lwt /Users/bryphe/.esy/3__________________________________________________________________/i/ocaml-4.8.1000-426898cd/lib/ocaml
>> Build system running: esy
>>> stdout

>>> stderr
info esy 0.6.2 (using package.json)
Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/bryphe/reason-sdl2/examples/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/bryphe/reason-sdl2/examples/basic.re
➡️ running bsc /Users/bryphe/.esy/3__________________________________________________________________/i/ocaml-4.8.1000-426898cd/bin/ocamlc.opt -c -I '/Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/default/examples/.sdl2example.objs/byte' -I '/Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/default/examples/../src/.sdl2.objs/byte' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/reason_native__s__console-0.1.0-bd137336/lib/console/lib' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/reason_gl_matrix-0.9.9306-8d367e00/lib/reglm' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__seq-opam__c__base-c4bafc44/lib/seq' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__result-opam__c__1.4-bd05c165/lib/result' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__ocamlfind-opam__c__1.8.1-cbae71df/lib/bytes' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__lwt-opam__c__4.2.1-5422e25d/lib/lwt' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/ocaml-4.8.1000-426898cd/lib/ocaml' -bin-annot -open Sdl2example -w -40 -ppx '/Users/bryphe/reason-sdl2/_esy/example/store/b/reason_sdl2-5c59ac2d/default/.ppx/95c43a5e8eeb6d851e1995d1bca87765/ppx.exe --as-ppx --cookie '\''library-name="sdl2example"'\''' -impl /Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/.lsp/sdl2example__Basic.ast with pwd /Users/bryphe/reason-sdl2/examples
<< Making lastDefinitions with type error for file:///Users/bryphe/reason-sdl2/examples/basic.re
type error here File "command line", line 1:
Error: Unbound module Sdl2example
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/bryphe/reason-sdl2/examples/basic.re", "diagnostics": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "message": "File \"command line\", line 1:\nError: Unbound module Sdl2example", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":1,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":5}}}
[server] Got a method textDocument/definition
[server] processing took 0.00596046447754ms
Sending response {"id": 1, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":2,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":5}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0159740447998ms
Sending response {"id": 2, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":3,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":6}}}
[server] Got a method textDocument/definition
[server] processing took 0.00786781311035ms
Sending response {"id": 3, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":4,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":6}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00691413879395ms
Sending response {"id": 4, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":5,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":7}}}
[server] Got a method textDocument/definition
[server] processing took 0.00596046447754ms
Sending response {"id": 5, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":6,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":7}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00715255737305ms
Sending response {"id": 6, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":7,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":8}}}
[server] Got a method textDocument/definition
[server] processing took 0.00596046447754ms
Sending response {"id": 7, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":8,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":8}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00810623168945ms
Sending response {"id": 8, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":9,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":9}}}
[server] Got a method textDocument/definition
[server] processing took 0.00715255737305ms
Sending response {"id": 9, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":10,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":9}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00715255737305ms
Sending response {"id": 10, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":11,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":10}}}
[server] Got a method textDocument/definition
[server] processing took 0.00500679016113ms
Sending response {"id": 11, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":12,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":10}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00500679016113ms
Sending response {"id": 12, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":13,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":2}}}
[server] Got a method textDocument/definition
[server] processing took 0.00500679016113ms
Sending response {"id": 13, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":14,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":2}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00596046447754ms
Sending response {"id": 14, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":15,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":207,"character":1}}}
[server] Got a method textDocument/definition
[server] processing took 0.00596046447754ms
Sending response {"id": 15, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":16,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":207,"character":1}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0128746032715ms
Sending response {"id": 16, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":17,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":207,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.00596046447754ms
Sending response {"id": 17, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":18,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":207,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00810623168945ms
Sending response {"id": 18, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":19,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":10,"character":16}}}
[server] Got a method textDocument/definition
[server] processing took 0.0178813934326ms
Sending response {"id": 19, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":20,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":10,"character":16}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0100135803223ms
Sending response {"id": 20, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":21,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":207,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0138282775879ms
Sending response {"id": 21, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":22,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":207,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0100135803223ms
Sending response {"id": 22, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":23,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":207,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0159740447998ms
Sending response {"id": 23, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":24,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":207,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0100135803223ms
Sending response {"id": 24, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":25,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":0,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.00977516174316ms
Sending response {"id": 25, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":26,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":0,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00810623168945ms
Sending response {"id": 26, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":27,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":207,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0119209289551ms
Sending response {"id": 27, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":28,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":207,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00786781311035ms
Sending response {"id": 28, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":29,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0109672546387ms
Sending response {"id": 29, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":30,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0100135803223ms
Sending response {"id": 30, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":31,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0119209289551ms
Sending response {"id": 31, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":32,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00977516174316ms
Sending response {"id": 32, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":33,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0169277191162ms
Sending response {"id": 33, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":34,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00905990600586ms
Sending response {"id": 34, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":35,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0150203704834ms
Sending response {"id": 35, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":36,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0250339508057ms
Sending response {"id": 36, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":37,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.018835067749ms
Sending response {"id": 37, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":38,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00905990600586ms
Sending response {"id": 38, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":39,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0100135803223ms
Sending response {"id": 39, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":40,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00905990600586ms
Sending response {"id": 40, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":41,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0731945037842ms
Sending response {"id": 41, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":42,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00905990600586ms
Sending response {"id": 42, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":43,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.014066696167ms
Sending response {"id": 43, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":44,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00905990600586ms
Sending response {"id": 44, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didOpen","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/bin_native/test_sdl2.re","languageId":"reason","version":0,"text":""}}}
Found a `dune` file at /Users/bryphe/reason-sdl2/bin_native
]] Making a new jbuilder package at /Users/bryphe/reason-sdl2/bin_native
=== Project root: /Users/bryphe/reason-sdl2
Detected `esy` dependency manager for local use
Get ocaml stdlib dirs
Old dune process
=== Build dir:    /Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088
Include subdirs? no :/
Got a compiled base /Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/default/bin_native/.test_sdl2.eobjs/byte
Local file: /Users/bryphe/reason-sdl2/bin_native/test_sdl2.re
Local .cmt file: /Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/default/bin_native/.test_sdl2.eobjs/byte/Test_sdl2.cmt
Local file: /Users/bryphe/reason-sdl2/bin_native/test_output.re
Local .cmt file: /Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/default/bin_native/.test_sdl2.eobjs/byte/Test_output.cmt
>> Collecting deps for /Users/bryphe/.esy/3__________________________________________________________________/i/ocaml-4.8.1000-426898cd/lib/ocaml
Depedency dirs /Users/bryphe/.esy/3__________________________________________________________________/i/ocaml-4.8.1000-426898cd/lib/ocaml
>> Build system running: esy
>>> stdout

>>> stderr
info esy 0.6.2 (using package.json)
Affected files: 
Cleaning bsconfig.json
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/bryphe/reason-sdl2/bin_native/bsconfig.json", "diagnostics": []}}
Running diagnostics for file:///Users/bryphe/reason-sdl2/bin_native/test_sdl2.re
➡️ running bsc /Users/bryphe/.esy/3__________________________________________________________________/i/ocaml-4.8.1000-426898cd/bin/ocamlc.opt -c -I '/Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/default/bin_native/.test_sdl2.eobjs/byte' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/ocaml-4.8.1000-426898cd/lib/ocaml' -bin-annot -w @1..3@5..28@30..39@43@46..47@49..57@61..62-40 -strict-sequence -strict-formats -short-paths -keep-locs -w @1..3@5..28@30..39@43@46..47@49..57@61..62-40 -strict-sequence -strict-formats -short-paths -keep-locs -ppx '/Users/bryphe/reason-sdl2/_esy/example/store/b/reason_sdl2-8b6b1ed1/default/.ppx/bcab0be011c28261c514e69f4fe141f8/ppx.exe --as-ppx' -impl /Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/.lsp/Test_sdl2.ast with pwd /Users/bryphe/reason-sdl2/bin_native
<< Replacing lastDefinitions for file:///Users/bryphe/reason-sdl2/bin_native/test_sdl2.re
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/bryphe/reason-sdl2/bin_native/test_sdl2.re", "diagnostics": []}}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/bin_native/test_sdl2.re","version":1},"contentChanges":[{"text":"open Sdl2example;\n\nBasic.run();\n"}]}}
Running diagnostics for file:///Users/bryphe/reason-sdl2/bin_native/test_sdl2.re
➡️ running bsc /Users/bryphe/.esy/3__________________________________________________________________/i/ocaml-4.8.1000-426898cd/bin/ocamlc.opt -c -I '/Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/default/bin_native/.test_sdl2.eobjs/byte' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/ocaml-4.8.1000-426898cd/lib/ocaml' -bin-annot -w @1..3@5..28@30..39@43@46..47@49..57@61..62-40 -strict-sequence -strict-formats -short-paths -keep-locs -w @1..3@5..28@30..39@43@46..47@49..57@61..62-40 -strict-sequence -strict-formats -short-paths -keep-locs -ppx '/Users/bryphe/reason-sdl2/_esy/example/store/b/reason_sdl2-8b6b1ed1/default/.ppx/bcab0be011c28261c514e69f4fe141f8/ppx.exe --as-ppx' -impl /Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/.lsp/Test_sdl2.ast with pwd /Users/bryphe/reason-sdl2/bin_native
Now loading /Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/.lsp/Test_sdl2.cmt
Size 4595
type error here Line 1, characters 5-16:
Error: Unbound module Sdl2example
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/bryphe/reason-sdl2/bin_native/test_sdl2.re", "diagnostics": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "message": "Line 1, characters 5-16:\nError: Unbound module Sdl2example", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":45,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":207,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0231266021729ms
Sending response {"id": 45, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":46,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":207,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.014066696167ms
Sending response {"id": 46, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":47,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0159740447998ms
Sending response {"id": 47, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":48,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.014066696167ms
Sending response {"id": 48, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":49,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0190734863281ms
Sending response {"id": 49, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":50,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0162124633789ms
Sending response {"id": 50, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re","version":3},"contentChanges":[{"text":"let isNative =\n  switch (Sys.backend_type) {\n  | Native => true\n  | Bytecode => true\n  | _ => false\n  };\n\nlet getExecutingDirectory = () =>\n  isNative ? Filename.dirname(Sys.argv[0]) ++ Filename.dir_sep : \"\";\n\nlet run = () => {\n  Sdl2.Log.setOutputFunction((_category, _priority, message) => {\n    Console.log(\"SDL2: \" ++ message)\n  });\n\n  let _ = Sdl2.init();\n  let attachResult = Sdl2.Platform.win32AttachConsole();\n\n  // If we were unable to attach a console, try allocating a new one\n  let _code =\n    if (attachResult == 0) {\n      Sdl2.Platform.win32AllocConsole();\n    } else {\n      attachResult;\n    };\n\n  Console.log(\"Operating system: \" ++ Sdl2.Platform.getName());\n  Console.log(\"Operating system version: \" ++ Sdl2.Platform.getVersion());\n  let primaryWindow = Sdl2.Window.create(100, 100, \"test\");\n  let context = Sdl2.Gl.setup(primaryWindow);\n  let version = Sdl2.Gl.getString(Sdl2.Gl.Version);\n  let vendor = Sdl2.Gl.getString(Sdl2.Gl.Vendor);\n  let shadingLanguageVersion =\n    Sdl2.Gl.getString(Sdl2.Gl.ShadingLanguageVersion);\n\n  Console.log(\n    Printf.sprintf(\n      \"OpenGL Info - version: %s vendor: %s shading language version: %s\\n\",\n      version,\n      vendor,\n      shadingLanguageVersion,\n    ),\n  );\n\n  Sdl2.Gl.setSwapInterval(1);\n  //glfwMakeContextCurrent(primaryWindow);\n\n  /*let monitor = glfwGetPrimaryMonitor();\n    let vidMode = glfwGetVideoMode(monitor);*/\n\n  /*Sdl2.(\n      primaryWindow,\n      (vidMode.width - 800) / 2,\n      (vidMode.height - 600) / 2,\n    );*/\n  Sdl2.Window.setTitle(primaryWindow, \"reason-sdl2 example\");\n  Sdl2.Window.setWin32ProcessDPIAware(primaryWindow);\n\n  let scale = Sdl2.Window.getWin32ScaleFactor(primaryWindow);\n  Console.log(\"Win32 scale factor: \" ++ string_of_float(scale));\n\n  let display = Sdl2.Window.getDisplay(primaryWindow);\n  let dpi = Sdl2.Display.getDPI(display);\n  Console.log(\"Display DPI: \" ++ Sdl2.Display.Dpi.show(dpi));\n\n  let mode = Sdl2.Display.getDesktopMode(display);\n  Console.log(\"Display mode: \" ++ Sdl2.Display.Mode.show(mode));\n\n  Sdl2.Window.setSize(primaryWindow, 800, 600);\n  Sdl2.Window.center(primaryWindow);\n\n  //Sdl2.Window.setTransparency(primaryWindow, 0.8);\n\n  Sdl2.Window.setMacBackgroundColor(primaryWindow, 0.0, 0.0, 0.0, 1.);\n  Sdl2.Window.setMacTitlebarTransparent(primaryWindow);\n\n  Sdl2.Window.show(primaryWindow);\n\n  /*Sdl2.Window.setHitTest(\n      primaryWindow,\n      Some(\n        (w, x, y) => {\n          let size = Sdl2.Window.getSize(w);\n          let id = Sdl2.Window.getId(w);\n          Printf.printf(\n            \"hit test - window id: %d width: %d height: %d areaX: %d areaY: %d\\n\",\n            id,\n            size.width,\n            size.height,\n            x,\n            y,\n          );\n          if (x < 10) {\n            ResizeLeft;\n          } else if (y < 40) {\n            Draggable;\n          } else {\n            Normal;\n          };\n        },\n      ),\n    );*/\n  //Sdl2.Window.setBordered(primaryWindow, false);\n  // Sdl2.Window.setSize(primaryWindow, 800, 600);\n  Sdl2.Window.setResizable(primaryWindow, true);\n  Sdl2.Window.setMinimumSize(primaryWindow, 200, 100);\n\n  // Start text input, to experiment with IME + events\n  Sdl2.TextInput.setInputRect(25, 50, 100, 25);\n  Sdl2.TextInput.start();\n\n  //Sdl2.Window.maximize(primaryWindow);\n\n  /*   let secondaryWindow = */\n  /*     glfwCreateWindow(100, 50, ~sharedContext=primaryWindow, \"secondWindow\"); */\n  /*   glfwSetWindowPos(secondaryWindow, vidMode.width / 2, vidMode.height / 2); */\n  /*   glfwSetWindowSize(secondaryWindow, 800, 600); */\n  /*   glfwSetWindowTitle(secondaryWindow, \"second window\"); */\n\n  let cursors = [|\n    Sdl2.Cursor.createSystem(Arrow),\n    Sdl2.Cursor.createSystem(IBeam),\n    Sdl2.Cursor.createSystem(Wait),\n    Sdl2.Cursor.createSystem(No),\n    Sdl2.Cursor.createSystem(Hand),\n  |];\n  Random.self_init();\n  let cursor = Random.int(Array.length(cursors));\n  Sdl2.Cursor.set(cursors[cursor]);\n\n  let iconSurface =\n    Sdl2.Surface.createFromImagePath(\n      getExecutingDirectory() ++ \"favicon01.png\",\n    );\n  switch (iconSurface) {\n  | Ok(v) => Sdl2.Window.setIcon(primaryWindow, v)\n  | Error(msg) => prerr_endline(\"Error: \" ++ msg)\n  };\n\n  /* glfwSwapInterval sets the 'swap interval' - also known as vsync / vertical synchronization */\n  /* A setting of 0 disables vsync, unless it is overridden by a driver or a user setting */\n  // TODO:\n  //glfwSwapInterval(0);\n\n  //let width = ref(800);\n  //let height = ref(600);\n\n  let frameBufferSize = Sdl2.Gl.getDrawableSize(primaryWindow);\n  Console.log(\n    \"framebuffersize: \"\n    ++ string_of_int(frameBufferSize.width)\n    ++ \"x\"\n    ++ string_of_int(frameBufferSize.height),\n  );\n\n  let render = window => {\n    //  glfwMakeContextCurrent(window);\n    Sdl2.Gl.makeCurrent(window, context);\n    Sdl2.Gl.swapWindow(window);\n  };\n\n  //let frame = ref(0);\n  Sdl2.renderLoop(() => {\n    switch (Sdl2.Event.poll()) {\n    | None => ()\n    | Some(evt) =>\n      //Console.log(Sdl2.Event.show(evt));\n      switch (evt) {\n      | Sdl2.Event.Quit => exit(0)\n      | _ => ()\n      }\n    };\n\n    render(primaryWindow);\n    /* render(secondaryWindow); */\n    /*  if (frame^ == 60) {\n          captureWindow(primaryWindow, Printf.sprintf(\"scrot%d.tga\", frame^));\n        };\n        frame := frame^ + 1;*/\n\n    //let s = Glfw.glfwGetClipboardString(primaryWindow);\n\n    //let v = switch(s) {\n    //| Some(v) => \"Some(\" ++ v ++ \")\"\n    //| None => \"None\"\n    //}\n    //Console.log (\"Clipboard string before: \" ++ v);\n\n    //Glfw.glfwSetClipboardString(primaryWindow, \"test clipboard: \" ++ string_of_int(frame^));\n\n    //let s = Glfw.glfwGetClipboardString(primaryWindow);\n    //let v = switch(s) {\n    //| Some(v) => \"Some(\" ++ v ++ \")\"\n    //| None => \"None\"\n    //}\n    //Console.log (\"Clipboard string after: \" ++ v);\n\n    /* Run the GC so we can catch any GC-related crashes early! */\n    Gc.full_major();\n    //glfwPollEvents();\n    //glfwWindowShouldClose(primaryWindow);\n    false;\n  });\n\n  Console.log(\"Done!\");\n  //glfwTerminate();\n};\n"}]}}
Read message 
{"jsonrpc":"2.0","id":51,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.00500679016113ms
➡️ running bsc /Users/bryphe/.esy/3__________________________________________________________________/i/ocaml-4.8.1000-426898cd/bin/ocamlc.opt -c -I '/Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/default/examples/.sdl2example.objs/byte' -I '/Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/default/examples/../src/.sdl2.objs/byte' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/reason_native__s__console-0.1.0-bd137336/lib/console/lib' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/reason_gl_matrix-0.9.9306-8d367e00/lib/reglm' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__seq-opam__c__base-c4bafc44/lib/seq' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__result-opam__c__1.4-bd05c165/lib/result' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__ocamlfind-opam__c__1.8.1-cbae71df/lib/bytes' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__lwt-opam__c__4.2.1-5422e25d/lib/lwt' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/ocaml-4.8.1000-426898cd/lib/ocaml' -bin-annot -open Sdl2example -w -40 -ppx '/Users/bryphe/reason-sdl2/_esy/example/store/b/reason_sdl2-5c59ac2d/default/.ppx/95c43a5e8eeb6d851e1995d1bca87765/ppx.exe --as-ppx --cookie '\''library-name="sdl2example"'\''' -impl /Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/.lsp/sdl2example__Basic.ast with pwd /Users/bryphe/reason-sdl2/examples
Sending response {"id": 51, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":52,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0121593475342ms
Sending response {"id": 52, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":53,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.00691413879395ms
Sending response {"id": 53, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":54,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00905990600586ms
Sending response {"id": 54, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":55,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0109672546387ms
Sending response {"id": 55, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":56,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0100135803223ms
Sending response {"id": 56, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"textDocument/didChange","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re","version":4},"contentChanges":[{"text":"let isNative =\n  switch (Sys.backend_type) {\n  | Native => true\n  | Bytecode => true\n  | _ => false\n  };\n\nlet getExecutingDirectory = () =>\n  isNative ? Filename.dirname(Sys.argv[0]) ++ Filename.dir_sep : \"\";\n\nlet run = () => {\n  Sdl2.Log.setOutputFunction((_category, _priority, message) => {\n    Console.log(\"SDL2: \" ++ message)\n  });\n\n  let _ = Sdl2.init();\n  let attachResult = Sdl2.Platform.win32AttachConsole();\n\n  // If we were unable to attach a console, try allocating a new one\n  let _code =\n    if (attachResult == 0) {\n      Sdl2.Platform.win32AllocConsole();\n    } else {\n      attachResult;\n    };\n\n  Console.log(\"Operating system: \" ++ Sdl2.Platform.getName());\n  Console.log(\"Operating system version: \" ++ Sdl2.Platform.getVersion());\n  let primaryWindow = Sdl2.Window.create(100, 100, \"test\");\n  let context = Sdl2.Gl.setup(primaryWindow);\n  let version = Sdl2.Gl.getString(Sdl2.Gl.Version);\n  let vendor = Sdl2.Gl.getString(Sdl2.Gl.Vendor);\n  let shadingLanguageVersion =\n    Sdl2.Gl.getString(Sdl2.Gl.ShadingLanguageVersion);\n\n  Console.log(\n    Printf.sprintf(\n      \"OpenGL Info - version: %s vendor: %s shading language version: %s\\n\",\n      version,\n      vendor,\n      shadingLanguageVersion,\n    ),\n  );\n\n  Sdl2.Gl.setSwapInterval(1);\n  //glfwMakeContextCurrent(primaryWindow);\n\n  /*let monitor = glfwGetPrimaryMonitor();\n    let vidMode = glfwGetVideoMode(monitor);*/\n\n  /*Sdl2.(\n      primaryWindow,\n      (vidMode.width - 800) / 2,\n      (vidMode.height - 600) / 2,\n    );*/\n  Sdl2.Window.setTitle(primaryWindow, \"reason-sdl2 example\");\n  Sdl2.Window.setWin32ProcessDPIAware(primaryWindow);\n\n  let scale = Sdl2.Window.getWin32ScaleFactor(primaryWindow);\n  Console.log(\"Win32 scale factor: \" ++ string_of_float(scale));\n\n  let display = Sdl2.Window.getDisplay(primaryWindow);\n  let dpi = Sdl2.Display.getDPI(display);\n  Console.log(\"Display DPI: \" ++ Sdl2.Display.Dpi.show(dpi));\n\n  let mode = Sdl2.Display.getDesktopMode(display);\n  Console.log(\"Display mode: \" ++ Sdl2.Display.Mode.show(mode));\n\n  Sdl2.Window.setSize(primaryWindow, 800, 600);\n  Sdl2.Window.center(primaryWindow);\n\n  //Sdl2.Window.setTransparency(primaryWindow, 0.8);\n\n  Sdl2.Window.setMacBackgroundColor(primaryWindow, 0.0, 0.0, 0.0, 1.);\n  Sdl2.Window.setMacTitlebarTransparent(primaryWindow);\n\n  Sdl2.Window.show(primaryWindow);\n\n  /*Sdl2.Window.setHitTest(\n      primaryWindow,\n      Some(\n        (w, x, y) => {\n          let size = Sdl2.Window.getSize(w);\n          let id = Sdl2.Window.getId(w);\n          Printf.printf(\n            \"hit test - window id: %d width: %d height: %d areaX: %d areaY: %d\\n\",\n            id,\n            size.width,\n            size.height,\n            x,\n            y,\n          );\n          if (x < 10) {\n            ResizeLeft;\n          } else if (y < 40) {\n            Draggable;\n          } else {\n            Normal;\n          };\n        },\n      ),\n    );*/\n  //Sdl2.Window.setBordered(primaryWindow, false);\n  // Sdl2.Window.setSize(primaryWindow, 800, 600);\n  Sdl2.Window.setResizable(primaryWindow, true);\n  Sdl2.Window.setMinimumSize(primaryWindow, 200, 100);\n\n  // Start text input, to experiment with IME + events\n  Sdl2.TextInput.setInputRect(25, 50, 100, 25);\n  Sdl2.TextInput.start();\n\n  //Sdl2.Window.maximize(primaryWindow);\n\n  /*   let secondaryWindow = */\n  /*     glfwCreateWindow(100, 50, ~sharedContext=primaryWindow, \"secondWindow\"); */\n  /*   glfwSetWindowPos(secondaryWindow, vidMode.width / 2, vidMode.height / 2); */\n  /*   glfwSetWindowSize(secondaryWindow, 800, 600); */\n  /*   glfwSetWindowTitle(secondaryWindow, \"second window\"); */\n\n  let cursors = [|\n    Sdl2.Cursor.createSystem(Arrow),\n    Sdl2.Cursor.createSystem(IBeam),\n    Sdl2.Cursor.createSystem(Wait),\n    Sdl2.Cursor.createSystem(No),\n    Sdl2.Cursor.createSystem(Hand),\n  |];\n  Random.self_init();\n  let cursor = Random.int(Array.length(cursors));\n  Sdl2.Cursor.set(cursors[cursor]);\n\n  let iconSurface =\n    Sdl2.Surface.createFromImagePath(\n      getExecutingDirectory() ++ \"favicon01.png\",\n    );\n  switch (iconSurface) {\n  | Ok(v) => Sdl2.Window.setIcon(primaryWindow, v)\n  | Error(msg) => prerr_endline(\"Error: \" ++ msg)\n  };\n\n  /* glfwSwapInterval sets the 'swap interval' - also known as vsync / vertical synchronization */\n  /* A setting of 0 disables vsync, unless it is overridden by a driver or a user setting */\n  // TODO:\n  //glfwSwapInterval(0);\n\n  //let width = ref(800);\n  //let height = ref(600);\n\n  let frameBufferSize = Sdl2.Gl.getDrawableSize(primaryWindow);\n  Console.log(\n    \"framebuffersize: \"\n    ++ string_of_int(frameBufferSize.width)\n    ++ \"x\"\n    ++ string_of_int(frameBufferSize.height),\n  );\n\n  let render = window => {\n    //  glfwMakeContextCurrent(window);\n    Sdl2.Gl.makeCurrent(window, context);\n    Sdl2.Gl.swapWindow(window);\n  };\n\n  //let frame = ref(0);\n  Sdl2.renderLoop(() => {\n    switch (Sdl2.Event.poll()) {\n    | None => ()\n    | Some(evt) =>\n      //Console.log(Sdl2.Event.show(evt));\n      switch (evt) {\n      | Sdl2.Event.Quit => exit(0)\n      | _ => ()\n      }\n    };\n\n    render(primaryWindow);\n    /* render(secondaryWindow); */\n    /*  if (frame^ == 60) {\n          captureWindow(primaryWindow, Printf.sprintf(\"scrot%d.tga\", frame^));\n        };\n        frame := frame^ + 1;*/\n\n    //let s = Glfw.glfwGetClipboardString(primaryWindow);\n\n    //let v = switch(s) {\n    //| Some(v) => \"Some(\" ++ v ++ \")\"\n    //| None => \"None\"\n    //}\n    //Console.log (\"Clipboard string before: \" ++ v);\n\n    //Glfw.glfwSetClipboardString(primaryWindow, \"test clipboard: \" ++ string_of_int(frame^));\n\n    //let s = Glfw.glfwGetClipboardString(primaryWindow);\n    //let v = switch(s) {\n    //| Some(v) => \"Some(\" ++ v ++ \")\"\n    //| None => \"None\"\n    //}\n    //Console.log (\"Clipboard string after: \" ++ v);\n\n    /* Run the GC so we can catch any GC-related crashes early! */\n    Gc.full_major();\n    //glfwPollEvents();\n    //glfwWindowShouldClose(primaryWindow);\n    false;\n  });\n\n  Console.log(\"Done!\");\n  //glfwTerminate();\n};\n"}]}}
Read message 
{"jsonrpc":"2.0","id":57,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0109672546387ms
➡️ running bsc /Users/bryphe/.esy/3__________________________________________________________________/i/ocaml-4.8.1000-426898cd/bin/ocamlc.opt -c -I '/Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/default/examples/.sdl2example.objs/byte' -I '/Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/default/examples/../src/.sdl2.objs/byte' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/reason_native__s__console-0.1.0-bd137336/lib/console/lib' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/reason_gl_matrix-0.9.9306-8d367e00/lib/reglm' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__seq-opam__c__base-c4bafc44/lib/seq' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__result-opam__c__1.4-bd05c165/lib/result' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__ocamlfind-opam__c__1.8.1-cbae71df/lib/bytes' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/opam__s__lwt-opam__c__4.2.1-5422e25d/lib/lwt' -I '/Users/bryphe/.esy/3__________________________________________________________________/i/ocaml-4.8.1000-426898cd/lib/ocaml' -bin-annot -open Sdl2example -w -40 -ppx '/Users/bryphe/reason-sdl2/_esy/example/store/b/reason_sdl2-5c59ac2d/default/.ppx/95c43a5e8eeb6d851e1995d1bca87765/ppx.exe --as-ppx --cookie '\''library-name="sdl2example"'\''' -impl /Users/bryphe/reason-sdl2/_esy/default/store/b/reason_sdl2-e00e7088/.lsp/sdl2example__Basic.ast with pwd /Users/bryphe/reason-sdl2/examples
Sending response {"id": 57, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":58,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0131130218506ms
Sending response {"id": 58, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":59,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.00691413879395ms
Sending response {"id": 59, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":60,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0109672546387ms
Sending response {"id": 60, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":61,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":11,"character":8}}}
[server] Got a method textDocument/definition
[server] processing took 0.00810623168945ms
Sending response {"id": 61, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":62,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":11,"character":8}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00786781311035ms
Sending response {"id": 62, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":63,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0169277191162ms
Sending response {"id": 63, "jsonrpc": "2.0", "result": null}
Running diagnostics for file:///Users/bryphe/reason-sdl2/examples/basic.re
type error here File "command line", line 1:
Error: Unbound module Sdl2example
Sending notification {"jsonrpc": "2.0", "method": "textDocument/publishDiagnostics", "params": {"uri": "file:///Users/bryphe/reason-sdl2/examples/basic.re", "diagnostics": [{"range": {"start": {"line": 0, "character": 0}, "end": {"line": 0, "character": 0}}, "message": "File \"command line\", line 1:\nError: Unbound module Sdl2example", "severity": 1}]}}
Read message 
{"jsonrpc":"2.0","id":64,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00905990600586ms
Sending response {"id": 64, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":65,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0128746032715ms
Sending response {"id": 65, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":66,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0100135803223ms
Sending response {"id": 66, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":67,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0150203704834ms
Sending response {"id": 67, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":68,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.00905990600586ms
Sending response {"id": 68, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":69,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0250339508057ms
Sending response {"id": 69, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":70,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0100135803223ms
Sending response {"id": 70, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":71,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0150203704834ms
Sending response {"id": 71, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":72,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0100135803223ms
Sending response {"id": 72, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":73,"method":"textDocument/definition","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/definition
[server] processing took 0.0119209289551ms
Sending response {"id": 73, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":74,"method":"textDocument/documentHighlight","params":{"textDocument":{"uri":"file:///Users/bryphe/reason-sdl2/examples/basic.re"},"position":{"line":206,"character":0}}}
[server] Got a method textDocument/documentHighlight
[server] processing took 0.0100135803223ms
Sending response {"id": 74, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","id":75,"method":"shutdown","params":null}
Sending response {"id": 75, "jsonrpc": "2.0", "result": null}
Read message 
{"jsonrpc":"2.0","method":"exit","params":null}
Got exit! Terminating loop
Finished
